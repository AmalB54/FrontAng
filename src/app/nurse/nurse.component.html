<div class="card">
    <div class="flex justify-between items-center mb-4">
      <div class="font-semibold text-xl">Liste des Infirmiers</div>
      <button
        label="Ajouter un infirmier"
        pButton
        icon="pi pi-plus"
        class="p-button-rounded p-button-success p-button-sm mr-2"
        (click)="openNewNurseDialog()"
      ></button>
    </div>
  
    <p-table
      #dt
      [value]="nurses"
      dataKey="id"
      [rows]="10"
      [paginator]="true"
      [rowHover]="true"
      [showGridlines]="true"
      [globalFilterFields]="['name', 'department']"
      responsiveLayout="scroll"
    >
      <ng-template #caption>
        <div class="flex justify-between items-center flex-column sm:flex-row w-full">
          <span></span>
          <p-iconfield iconPosition="left">
            <p-inputicon><i class="pi pi-search"></i></p-inputicon>
            <input
              pInputText
              type="text"
              (input)="onGlobalFilter(dt, $event)"
              placeholder="Rechercher un infirmier"
            />
          </p-iconfield>
        </div>
      </ng-template>
  
      <ng-template pTemplate="header">
        <tr>
          <th>Nom</th>
          <th>Âge</th>
          <th>Département</th>
          <th>Actions</th>
        </tr>
      </ng-template>
  
      <ng-template pTemplate="body" let-nurse>
        <tr>
          <td>{{ nurse.name }}</td>
          <td>{{ nurse.age }}</td>
          <td>{{ nurse.department }}</td>
          <td>
            <div class="flex gap-2 justify-center">
              <button
                pButton
                icon="pi pi-pencil"
                class="p-button-rounded p-button-warning p-button-sm"
                (click)="editNurse(nurse)"
                title="Modifier"
              ></button>
              <button
                pButton
                icon="pi pi-trash"
                class="p-button-rounded p-button-danger p-button-sm"
                (click)="deleteNurse(nurse.id)"
                title="Supprimer"
              ></button>
            </div>
          </td>
        </tr>
      </ng-template>
  
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4">Aucun infirmier trouvé.</td>
        </tr>
      </ng-template>
    </p-table>
  
    <!-- Modal ajout -->
    <p-dialog [(visible)]="nurseDialog" [style]="{ width: '500px' }" header="Ajouter un infirmier" [modal]="true">
      <div class="flex flex-col gap-4">
        <div>
          <label for="name" class="font-bold mb-2 block">Nom</label>
          <input id="name" type="text" pInputText [(ngModel)]="newNurse.name" required autofocus />
        </div>
        <div>
          <label for="age" class="font-bold mb-2 block">Âge</label>
          <input id="age" type="number" pInputText [(ngModel)]="newNurse.age" required />
        </div>
        <div>
          <label for="department" class="font-bold mb-2 block">Département</label>
          <input id="department" type="text" pInputText [(ngModel)]="newNurse.department" required />
        </div>
      </div>
  
      <ng-template pTemplate="footer">
        <p-button label="Annuler" icon="pi pi-times" text (click)="nurseDialog = false"></p-button>
        <p-button label="Ajouter" icon="pi pi-check" (click)="saveNurse()"></p-button>
      </ng-template>
    </p-dialog>
  
    <!-- Modal édition -->
    <p-dialog [(visible)]="editDialogVisible" [style]="{ width: '500px' }" header="Modifier l'infirmier" [modal]="true">
      <div class="flex flex-col gap-4">
        <div>
          <label for="edit-name" class="font-bold mb-2 block">Nom</label>
          <input id="edit-name" type="text" pInputText [(ngModel)]="selectedNurse.name" required autofocus />
        </div>
        <div>
          <label for="edit-age" class="font-bold mb-2 block">Âge</label>
          <input id="edit-age" type="number" pInputText [(ngModel)]="selectedNurse.age" required />
        </div>
        <div>
          <label for="edit-department" class="font-bold mb-2 block">Département</label>
          <input id="edit-department" type="text" pInputText [(ngModel)]="selectedNurse.department" required />
        </div>
      </div>
  
      <ng-template pTemplate="footer">
        <p-button label="Annuler" icon="pi pi-times" text (click)="editDialogVisible = false"></p-button>
        <p-button label="Enregistrer" icon="pi pi-check" (click)="updateNurse()"></p-button>
      </ng-template>
    </p-dialog>
  </div>
  